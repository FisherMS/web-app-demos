---
interface Props {
  id: number;
  title: string;
  category: string;
  imageUrl: string;
  images?: string[];
  description: string;
}

const { id, title, category, imageUrl, images, description } = Astro.props;

// Prepare gallery images: Use 'images' array if exists, otherwise fallback to imageUrl
const galleryImages = images && images.length > 0 ? images : [imageUrl];
---

<div
  class="project-item lightbox-trigger break-inside-avoid mb-4 group relative rounded-2xl overflow-hidden shadow-sm hover:shadow-xl transition-all duration-500 cursor-zoom-in border border-gray-100/50"
  data-id={id}
  data-category={category}
  data-image={imageUrl}
  data-gallery={JSON.stringify(galleryImages)}
  data-title={title}
  data-desc={description}
>
  <img
    src={imageUrl}
    alt={title}
    class="w-full h-auto object-cover transform group-hover:scale-110 transition-transform duration-700"
    loading="lazy"
  />

  <!-- Overlay with Centered Title -->
  <div
    class="absolute inset-0 bg-black/30 group-hover:bg-black/50 transition-colors duration-500 flex items-center justify-center p-6"
  >
    <div class="text-center">
      <h3
        class="text-white text-2xl font-black tracking-tight leading-tight transform group-hover:scale-110 transition-transform duration-500 drop-shadow-md"
      >
        {title}
      </h3>
      <span
        class="mt-2 inline-block text-[10px] text-white/70 font-bold uppercase tracking-[0.2em] opacity-0 group-hover:opacity-100 transition-opacity duration-500"
      >
        {category}
      </span>
    </div>
  </div>
</div>
