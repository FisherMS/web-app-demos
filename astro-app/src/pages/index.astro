---
import Layout from "../layouts/Layout.astro";
import CategoryFilter from "../components/CategoryFilter.astro";
import ProjectCard from "../components/ProjectCard.astro";
import ImageLightbox from "../components/ImageLightbox.astro";
import portfolioData from "../data/portfolio.json";

// Ensure data is loaded and filtered
const projects = portfolioData.filter((project) => project.visible !== false);
---

<Layout
  title="作品集"
  description="精选设计师作品集，包含 UI/UX 设计、品牌形象、平面设计及创意插画。点击查看高清大图及项目详情。"
>
  <header class="pt-8 pb-3 px-6 bg-white shrink-0">
    <h1 class="text-3xl font-black text-gray-900 mb-1.5 tracking-tight">
      作品集
    </h1>
    <p
      class="text-gray-400 text-xs font-bold uppercase tracking-widest opacity-80"
    >
      精选作品与创意项目
    </p>
  </header>

  <CategoryFilter />

  <main class="p-4 pb-24 min-h-screen">
    <div class="columns-2 md:columns-3 lg:columns-4 gap-4 space-y-4">
      {projects.map((project) => <ProjectCard {...project} />)}
    </div>
  </main>

  <ImageLightbox />
</Layout>
